import{t as u,d as I,c as k,s as O,i as a,a as m,F as L,S as C,b as E,P as Z,C as ee}from"./index-7f41c4c2.js";var te=globalThis&&globalThis.__awaiter||function(e,l,t,n){function o(r){return r instanceof t?r:new t(function(d){d(r)})}return new(t||(t=Promise))(function(r,d){function $(c){try{x(n.next(c))}catch(y){d(y)}}function _(c){try{x(n.throw(c))}catch(y){d(y)}}function x(c){c.done?r(c.value):o(c.value).then($,_)}x((n=n.apply(e,l||[])).next())})};function N(e){let l=0,t=0,n=e;do l+=n.offsetTop||0,t+=n.offsetLeft||0,n=n.offsetParent;while(n);return{top:l,left:t}}class ne{constructor(l){this.element=l}getHorizontalScroll(){return this.element.scrollLeft}getVerticalScroll(){return this.element.scrollTop}getMaxHorizontalScroll(){return this.element.scrollWidth-this.element.clientWidth}getMaxVerticalScroll(){return this.element.scrollHeight-this.element.clientHeight}getHorizontalElementScrollOffset(l,t){return N(l).left-N(t).left}getVerticalElementScrollOffset(l,t){return N(l).top-N(t).top}scrollTo(l,t){this.element.scrollLeft=l,this.element.scrollTop=t}}class le{constructor(){this.element=window}getHorizontalScroll(){return window.scrollX||document.documentElement.scrollLeft}getVerticalScroll(){return window.scrollY||document.documentElement.scrollTop}getMaxHorizontalScroll(){return Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth)-window.innerWidth}getMaxVerticalScroll(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-window.innerHeight}getHorizontalElementScrollOffset(l){return(window.scrollX||document.documentElement.scrollLeft)+l.getBoundingClientRect().left}getVerticalElementScrollOffset(l){return(window.scrollY||document.documentElement.scrollTop)+l.getBoundingClientRect().top}scrollTo(l,t){window.scrollTo(l,t)}}const z={elements:[],cancelMethods:[],add:(e,l)=>{z.elements.push(e),z.cancelMethods.push(l)},remove:(e,l)=>{const t=z.elements.indexOf(e);t>-1&&(l&&z.cancelMethods[t](),z.elements.splice(t,1),z.cancelMethods.splice(t,1))}},J=typeof window<"u",re={cancelOnUserAction:!0,easing:e=>--e*e*e+1,elementToScroll:J?window:null,horizontalOffset:0,maxDuration:3e3,minDuration:250,speed:500,verticalOffset:0};function oe(e,l={}){return te(this,void 0,void 0,function*(){if(J){if(!window.Promise)throw"Browser doesn't support Promises, and animated-scroll-to depends on it, please provide a polyfill."}else return new Promise(F=>{F(!1)});let t,n,o,r=Object.assign(Object.assign({},re),l);const d=r.elementToScroll===window,$=!!r.elementToScroll.nodeName;if(!d&&!$)throw"Element to scroll needs to be either window or DOM element.";const _=d?document.documentElement:r.elementToScroll;getComputedStyle(_).getPropertyValue("scroll-behavior")==="smooth"&&console.warn(`${_.tagName} has "scroll-behavior: smooth" which can mess up with animated-scroll-to's animations`);const c=d?new le:new ne(r.elementToScroll);if(e instanceof Element){if(o=e,$&&(!r.elementToScroll.contains(o)||r.elementToScroll.isSameNode(o)))throw"options.elementToScroll has to be a parent of scrollToElement";t=c.getHorizontalElementScrollOffset(o,r.elementToScroll),n=c.getVerticalElementScrollOffset(o,r.elementToScroll)}else if(typeof e=="number")t=c.getHorizontalScroll(),n=e;else if(Array.isArray(e)&&e.length===2)t=e[0]===null?c.getHorizontalScroll():e[0],n=e[1]===null?c.getVerticalScroll():e[1];else throw`Wrong function signature. Check documentation.
Available method signatures are:
  animateScrollTo(y:number, options)
  animateScrollTo([x:number | null, y:number | null], options)
  animateScrollTo(scrollToElement:Element, options)`;t+=r.horizontalOffset,n+=r.verticalOffset;const y=c.getMaxHorizontalScroll(),A=c.getHorizontalScroll();t>y&&(t=y);const H=t-A,T=c.getMaxVerticalScroll(),R=c.getVerticalScroll();n>T&&(n=T);const S=n-R,V=Math.abs(Math.round(H/1e3*r.speed)),j=Math.abs(Math.round(S/1e3*r.speed));let D=V>j?V:j;return D<r.minDuration?D=r.minDuration:D>r.maxDuration&&(D=r.maxDuration),new Promise((F,s)=>{H===0&&S===0&&F(!0),z.remove(c.element,!0);let i;const f=()=>{g(),cancelAnimationFrame(i),F(!1)};z.add(c.element,f);const h=P=>P.preventDefault(),w=r.cancelOnUserAction?f:h,p=r.cancelOnUserAction?{passive:!0}:{passive:!1},v=["wheel","touchstart","keydown","mousedown"],g=()=>{v.forEach(P=>{c.element.removeEventListener(P,w,p)})};v.forEach(P=>{c.element.addEventListener(P,w,p)});const b=Date.now(),M=()=>{var P=Date.now()-b,W=P/D;const q=Math.round(A+H*r.easing(W)),B=Math.round(R+S*r.easing(W));P<D&&(q!==t||B!==n)?(c.scrollTo(q,B),i=requestAnimationFrame(M)):(c.scrollTo(t,n),cancelAnimationFrame(i),g(),z.remove(c.element,!1),F(!0))};i=requestAnimationFrame(M)})})}const ie=u('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" width="1.5em" version="1.0"><path id="path2413" d="m100 0c-55.2 0-100 44.8-100 100-5.0495e-15 55.2 44.8 100 100 100s100-44.8 100-100-44.8-100-100-100zm0 12.812c48.13 0 87.19 39.058 87.19 87.188s-39.06 87.19-87.19 87.19-87.188-39.06-87.188-87.19 39.058-87.188 87.188-87.188zm1.47 21.25c-5.45 0.03-10.653 0.737-15.282 2.063-4.699 1.346-9.126 3.484-12.876 6.219-3.238 2.362-6.333 5.391-8.687 8.531-4.159 5.549-6.461 11.651-7.063 18.687-0.04 0.468-0.07 0.868-0.062 0.876 0.016 0.016 21.702 2.687 21.812 2.687 0.053 0 0.113-0.234 0.282-0.937 1.941-8.085 5.486-13.521 10.968-16.813 4.32-2.594 9.808-3.612 15.778-2.969 2.74 0.295 5.21 0.96 7.38 2 2.71 1.301 5.18 3.361 6.94 5.813 1.54 2.156 2.46 4.584 2.75 7.312 0.08 0.759 0.05 2.48-0.03 3.219-0.23 1.826-0.7 3.378-1.5 4.969-0.81 1.597-1.48 2.514-2.76 3.812-2.03 2.077-5.18 4.829-10.78 9.407-3.6 2.944-6.04 5.156-8.12 7.343-4.943 5.179-7.191 9.069-8.564 14.719-0.905 3.72-1.256 7.55-1.156 13.19 0.025 1.4 0.062 2.73 0.062 2.97v0.43h21.598l0.03-2.4c0.03-3.27 0.21-5.37 0.56-7.41 0.57-3.27 1.43-5 3.94-7.81 1.6-1.8 3.7-3.76 6.93-6.47 4.77-3.991 8.11-6.99 11.26-10.125 4.91-4.907 7.46-8.26 9.28-12.187 1.43-3.092 2.22-6.166 2.46-9.532 0.06-0.816 0.07-3.03 0-3.968-0.45-7.043-3.1-13.253-8.15-19.032-0.8-0.909-2.78-2.887-3.72-3.718-4.96-4.394-10.69-7.353-17.56-9.094-4.19-1.062-8.23-1.6-13.35-1.75-0.78-0.023-1.59-0.036-2.37-0.032zm-10.908 103.6v22h21.998v-22h-21.998z" fill="#fff">'),se=()=>ie(),K=e=>e.length==0?e:[e[0].toUpperCase(),...e.slice(1,e.length)].join(""),ce=e=>e.length==0?e:[e[0].toLowerCase(),...e.slice(1,e.length)].join(""),ae={},ue=e=>new Promise((l,t)=>{let n=new FileReader;n.onload=()=>{l(n.result)},n.onerror=t,n.readAsText(e)}),Y=async e=>{const l=await ue(e),[t,...n]=l.split(`
`),o=t.split(","),r=[];for(const d of n){if(d.length<5)continue;const $=d.split(","),_=ae;for(let x=0;x<o.length;x++){const y=o[x].replaceAll(" ","").replaceAll("(months)","").replaceAll("(","").replaceAll(")","").trim(),A=$[x].replaceAll("＇","'");_[ce(y)]=A}r.push({..._})}return r},de=u('<input type="range" min="0" class="range range-info" step="1">'),me=u('<div class="w-full flex justify-between text-xs px-2">'),fe=u("<span>"),he=e=>[(()=>{const l=de();return l.$$input=t=>{const n=t?.target?.value??"0";try{e.onChange(parseInt(n))}catch{}},k(t=>{const n=e.id,o=e.options.length-1;return n!==t._v$&&O(l,"id",t._v$=n),o!==t._v$2&&O(l,"max",t._v$2=o),t},{_v$:void 0,_v$2:void 0}),k(()=>l.value=e.initialPosition??0),l})(),(()=>{const l=me();return a(l,m(L,{get each(){return e.options},children:t=>(()=>{const n=fe();return a(n,t),n})()})),l})()];I(["input"]);const pe=u('<img draggable="false">'),ge=u('<p class="supporter-tier pb-0 text-ellipsis truncate overflow-hidden">'),ve=u('<div class="supporter-tile noselect p-1"><div class="card rounded-md shadow-xl"><div class="card-body justify-center py-1 px-3"><div class="supporter-content justify-center pl-1"><h3 class="text-xl text-ellipsis truncate overflow-hidden">'),X=e=>(()=>{const l=ve(),t=l.firstChild,n=t.firstChild,o=n.firstChild,r=o.firstChild;return a(n,m(C,{get when(){return e.supporter.profilePic!=null},get children(){const d=pe();return k($=>{const _=e.supporter.profilePic,x=e.supporter.title;return _!==$._v$&&O(d,"src",$._v$=_),x!==$._v$2&&O(d,"alt",$._v$2=x),$},{_v$:void 0,_v$2:void 0}),d}}),o),a(r,()=>e.supporter.title),a(o,m(C,{get when(){return e.supporter.tier.length>0},get children(){const d=ge();return a(d,()=>e.supporter.tier),d}}),null),l})(),$e=u('<div class="form-control m-2"><label class="label cursor-pointer"><input type="checkbox" class="checkbox"><span class="label-text ml-3">'),we=e=>(()=>{const l=$e(),t=l.firstChild,n=t.firstChild,o=n.nextSibling;return n.addEventListener("change",r=>e.onChange(r?.target?.checked??!1)),a(o,()=>e.title),k(()=>n.checked=e.value),l})(),_e=u('<div class="form-control m-2"><label class="label cursor-pointer"><input type="color" class="input h-6 w-6 p-0 border-0 rounded"><span class="label-text ml-3">'),G=e=>(()=>{const l=_e(),t=l.firstChild,n=t.firstChild,o=n.nextSibling;return n.addEventListener("change",r=>e.onChange(r?.target?.value??"")),a(o,()=>e.title),k(()=>n.value=e.value),l})(),xe=u('<div class="dropdown"><label tabindex="0" class="btn m-1">: </label><ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52">'),be=u('<li class="cursor-pointer"><a>'),ye=e=>(()=>{const l=xe(),t=l.firstChild,n=t.firstChild,o=t.nextSibling;return a(t,()=>e.title,n),a(t,()=>e.value,null),a(o,m(L,{get each(){return e.options},children:r=>(()=>{const d=be(),$=d.firstChild;return d.$$click=()=>e.onChange(r),a($,()=>K(r)),d})()})),l})();I(["click"]);const Se=u('<div class="dropdown"><label tabindex="0" class="btn m-1">: </label><ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52">'),Ce=u("<span>✔️"),Te=u('<li class="cursor-pointer"><a>'),Pe=e=>{const l=n=>{e.values.includes(n)?e.onChange(e.values.filter(r=>r!==n)):e.onChange([...e.values,n])},t=(n,o)=>n.length===0?"NONE":n.length===1?n[0]:n.length===o.length?"ALL":`${n.length} items`;return(()=>{const n=Se(),o=n.firstChild,r=o.firstChild,d=o.nextSibling;return a(o,()=>e.title,r),a(o,()=>t(e.values,e.options),null),a(d,m(L,{get each(){return e.options},children:$=>(()=>{const _=Te(),x=_.firstChild;return _.$$click=()=>l($),a(x,m(C,{get when(){return e.values.includes($)},get children(){return Ce()}}),null),a(x,()=>K($),null),_})()})),n})()};I(["click"]);const U=(e,l,t)=>t.indexOf(e)===l,Q=e=>{e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},Ee=u('<div class="container mx-auto my-8 text-center"><div class="flex justify-center"><div class="card bg-primary mx-2 text-primary-content shadow-xl"><div class="card-body text-left"><h2 class="card-title">Patreon</h2><div class="flex justify-between w-full"><p>Upload Patreon supporter export (csv)</p></div><div class="card-actions justify-end"><input type="file" class="file-input file-input-bordered w-full max-w-xs"></div></div></div><div class="card bg-primary mx-2 text-primary-content shadow-xl"><div class="card-body text-left"><h2 class="card-title">Youtube Members</h2><p>Upload Youtube Members export (csv)</p><div class="card-actions justify-end"><input type="file" class="file-input file-input-bordered w-full max-w-xs">'),ze=u('<div class="divider divider-horizontal">'),Ae=u('<div class="m-8">'),De=u('<div class="inline-flex flex-wrap"><button class="btn btn-primary">Record screen'),Me=u('<div class="container mx-auto my-16 text-center"><h3 class="text-xl mb-4">Controls</h3><p class="mb-2">Number of supporters per row</p><div class="m-8"></div><div class="inline-flex flex-wrap"><div class="divider divider-horizontal"></div><div class="divider divider-horizontal"></div><div class="divider divider-horizontal">'),Fe=u('<div class="divider">'),He=u('<h3 class="text-2xl mb-4">Output'),ke=u("<p>No supporters loaded"),Le=u('<p class="my-2 text-xl">Patreon Supporters'),Re=u('<div class="inline-flex flex-wrap w-full">'),Ve=u('<p class="my-2 text-xl">Youtube Members'),je=u('<div class="inline-flex flex-wrap w-full justify-center">'),We=u('<div id="supporter-display" class="mx-auto mt-8 p-4 text-center">'),qe=u('<div id="bottom" class="divider mt-80">'),Ne=()=>{const[e,l]=E(5),[t,n]=E(!0),[o,r]=E("#00000080"),[d,$]=E("#f0f0f0"),[_,x]=E("left"),[c,y]=E([]),[A,H]=E(!1),[T,R]=E([]),[S,V]=E([]),j=async s=>{const f=(s?.target?.files??[])[0],p=(await Y(f)).filter(g=>g.patronStatus==="Active patron").sort((g,b)=>b.lifetimeAmount-g.lifetimeAmount),v=[];for(const g of p){const b={title:g.name,tier:g.tier.length>0?g.tier:"---"};v.push(b)}R(v),y(g=>[...g,...v.map(M=>M.tier)].filter(U))},D=async s=>{const f=(s?.target?.files??[])[0],h=await Y(f),w=[];for(const p of h){const v={title:p.member,tier:p.currentlevel??""};w.push(v)}V(w.sort((p,v)=>p.tier.localeCompare(v.tier)||p.title.localeCompare(v.title))),y(p=>[...p,...w.map(g=>g.tier)].filter(U))},F=async()=>{const s=document.querySelector("#bottom");if(s==null||document.querySelector("#supporter-display")==null)return;Q(document.documentElement),H(!0),oe(s,{cancelOnUserAction:!0,elementToScroll:window,minDuration:250,maxDuration:5e4,speed:1e4,easing:h=>h<.5?8*h*h*h*h:1-8*--h*h*h*h}).then(h=>{h&&(H(!1),Q(document.documentElement))})};return m(ee,{get children(){return[m(C,{get when(){return A()==!1},get children(){return[m(Z,{text:"Display Supporters"}),(()=>{const s=Ee(),i=s.firstChild,f=i.firstChild,h=f.firstChild,w=h.firstChild,p=w.nextSibling;p.firstChild;const v=p.nextSibling,g=v.firstChild,b=f.nextSibling,M=b.firstChild,P=M.firstChild,W=P.nextSibling,q=W.nextSibling,B=q.firstChild;return f.style.setProperty("background-color","#f96854"),a(p,m(se,{}),null),g.addEventListener("change",j),b.style.setProperty("background-color","#DD0000"),B.addEventListener("change",D),s})(),(()=>{const s=Me(),i=s.firstChild,f=i.nextSibling,h=f.nextSibling,w=h.nextSibling,p=w.firstChild,v=p.nextSibling,g=v.nextSibling;return a(s,m(he,{options:["1","2","3","4","5","6","7","8","9","10"],get initialPosition(){return e()},onChange:b=>l(b)}),h),a(w,m(we,{title:"Show tiers",get value(){return t()},onChange:n}),p),a(w,m(G,{title:"Background colour",get value(){return o()},onChange:r}),v),a(w,m(G,{title:"Background colour",get value(){return d()},onChange:$}),g),a(w,m(ye,{title:"Text align",get value(){return _()},options:["left","center","right"],onChange:x}),null),a(w,m(C,{get when(){return[...T(),...S()].length>0},get children(){return[ze(),m(Pe,{title:"Tiers to display",get values(){return c()},get options(){return[...T(),...S()].map(b=>b.tier).filter(U)},onChange:y})]}}),null),a(s,m(C,{get when(){return[...T(),...S()].length>0},get children(){return[Ae(),(()=>{const b=De(),M=b.firstChild;return M.$$click=F,b})()]}}),null),s})(),Fe()]}}),(()=>{const s=We();return a(s,m(C,{get when(){return A()==!1},get children(){return He()}}),null),a(s,m(C,{get when(){return[...T(),...S()].length===0},get children(){return ke()}}),null),a(s,m(C,{get when(){return T().filter(i=>c().includes(i.tier)).length>0},get children(){return[Le(),(()=>{const i=Re();return a(i,m(L,{get each(){return T().filter(f=>c().includes(f.tier))},children:f=>m(X,{supporter:f})})),i})()]}}),null),a(s,m(C,{get when(){return S().filter(i=>c().includes(i.tier)).length>0},get children(){return[Ve(),(()=>{const i=je();return a(i,m(L,{get each(){return S().filter(f=>c().includes(f.tier))},children:f=>m(X,{supporter:f})})),i})()]}}),null),k(i=>{const f=e()+1,h=_(),w=t()?"unset":"none",p=o(),v=d(),g=A()?"none":"unset";return f!==i._v$&&((i._v$=f)!=null?s.style.setProperty("--num-col",f):s.style.removeProperty("--num-col")),h!==i._v$2&&((i._v$2=h)!=null?s.style.setProperty("--content-text-align",h):s.style.removeProperty("--content-text-align")),w!==i._v$3&&((i._v$3=w)!=null?s.style.setProperty("--tier-display",w):s.style.removeProperty("--tier-display")),p!==i._v$4&&((i._v$4=p)!=null?s.style.setProperty("--tier-background",p):s.style.removeProperty("--tier-background")),v!==i._v$5&&((i._v$5=v)!=null?s.style.setProperty("--tier-frontground",v):s.style.removeProperty("--tier-frontground")),g!==i._v$6&&((i._v$6=g)!=null?s.style.setProperty("cursor",g):s.style.removeProperty("cursor")),i},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),s})(),m(C,{get when(){return[...T(),...S()].length>0},get children(){return qe()}})]}})};I(["click"]);export{Ne as SupporterPage,Ne as default};
